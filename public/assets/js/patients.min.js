var PatientsTable=React.createClass({displayName:"PatientsTable",getInitialState:function(){return{patients:{},name:"",forceptID:"",fieldNumber:""}},componentWillMount:function(){this.getPatients()},getPatients:function(e,t,a){e=e||"fetch";var n="fetch"===e?"GET":"POST";t=t||"",a=a||{},a._token=document.querySelector("meta[name='csrf-token']").getAttribute("value"),$.ajax({type:n,url:"/patients/"+e+"/"+t,data:a,success:function(e){for(var t=e.patients,a=Object.keys(t),n=0;n<a.length;n++)t[a[n]]=Utilities.applyGeneratedFields(t[a[n]]);this.setState({patients:t})}.bind(this)})},handleSearchNameChange:function(e){var t=e.target.value;0==t.length&&this.getPatients(),this.setState({name:t})},handleSearchForceptIDChange:function(e){var t=e.target.value;0==t.length&&this.getPatients(),this.setState({forceptID:t})},handleDoSearch:function(e){this.getPatients("search","",{by:e,"for":this.state[e]})},render:function(){var e,t=this.state.patients,a=Object.keys(t),n=a.length;return n>0&&(e=a.map(function(e,a){var n,l=t[e];if(l.hasOwnProperty("photo")&&null!==l.photo){var c=[];try{c=JSON.parse(l.photo)}catch(r){}c.length>0&&(n=React.createElement(Fields.Resource,{id:c[0],resource:{type:"image/jpeg"},className:"thumbnail"}))}else n="No photo";var s=React.createElement("em",null,"Checked out"),i=l.visits.length;return i>0&&l.hasOwnProperty("visit")&&null!==l.visit&&(s=React.createElement("a",{href:["/visits/stage/",l.visit.stage,"/handle/",l.visit.id].join("")},React.createElement("h4",null,React.createElement("span",{className:"label label-success"},l.visit.id," »")))),React.createElement("tr",null,React.createElement("td",{width:200},n),React.createElement("td",null,React.createElement("h4",null,React.createElement("span",{className:"label label-default"},l.id))),React.createElement("td",null,Utilities.getFullName(l)),React.createElement("td",null,l.visits.length),React.createElement("td",null,s),React.createElement("td",null,l.created_at),React.createElement("td",null,l.updated_at),React.createElement("td",null,React.createElement("a",{href:["/patients/view/",l.id].join("")},"»")))}.bind(this))),React.createElement("div",{className:"p-t"},React.createElement("h1",null,"Patients (",n,")"),React.createElement("fieldset",{className:"fieldset"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("div",{className:"input-group"},React.createElement("input",{type:"text",className:"form-control",placeholder:"Search by first or last name...",onChange:this.handleSearchNameChange}),React.createElement("span",{className:"input-group-btn"},React.createElement("button",{className:"btn btn-primary",type:"button",onMouseUp:this.handleDoSearch.bind(this,"name")},"Search")))),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("div",{className:"input-group"},React.createElement("input",{type:"number",className:"form-control",placeholder:"Search by Forcept ID...",min:"100000",onChange:this.handleSearchForceptIDChange}),React.createElement("span",{className:"input-group-btn"},React.createElement("button",{className:"btn btn-primary",type:"button",onMouseUp:this.handleDoSearch.bind(this,"forceptID")},"Search")))),React.createElement("div",{className:"col-xs-12 col-sm-4"},React.createElement("div",{className:"input-group"},React.createElement("input",{type:"number",className:"form-control",placeholder:"Search by field number..."}),React.createElement("span",{className:"input-group-btn"},React.createElement("button",{className:"btn btn-primary",type:"button"},"Search")))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12 table-responsive"},React.createElement("table",{className:"table table-striped"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Photo"),React.createElement("th",null,"ID"),React.createElement("th",null,"Name"),React.createElement("th",null,"Visits"),React.createElement("th",null,"Location"),React.createElement("th",null,"Created at"),React.createElement("th",null,"Last updated"),React.createElement("th",null))),React.createElement("tbody",null,e)))))}});